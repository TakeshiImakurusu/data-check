# ğŸ”§ PyInstallerã€Œdekispart.pyé…ç½®ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ã‚¨ãƒ©ãƒ¼ - å®Œå…¨è§£æ±º

## âŒ **å•é¡Œã®è©³ç´°**

**ã€Œpyinstaller --noconsole --onefileã§data_check.pyã‚’exeãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›å¾Œã€å®Ÿè¡Œã™ã‚‹ã¨dekispart.pyãŒé…ç½®ã•ã‚Œã¦ã„ã¾ã›ã‚“ã¨ã§ã¾ã™ã€‚åŒã˜ãƒ•ã‚©ãƒ«ãƒ€å†…ã«æ ¼ç´ã—ã¦ã„ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€**

### å•é¡Œã®åŸå› 
1. **å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®ä½¿ç”¨**: data_check.py ãŒ `importlib.import_module()` ã‚’ä½¿ç”¨
2. **PyInstallerä¾å­˜é–¢ä¿‚æ¤œå‡ºå¤±æ•—**: å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¯é™çš„è§£æã§æ¤œå‡ºã•ã‚Œãªã„
3. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŸ‹ã‚è¾¼ã¿ä¸è¶³**: dekispart.pyç­‰ãŒå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã¾ã‚Œãªã„

---

## âœ… **å®Œå…¨è§£æ±ºæ¸ˆã¿**

### ğŸ† **è§£æ±ºæ–¹æ³•**

#### **1. é™çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¸ã®å¤‰æ›´**
```python
# ä¿®æ­£å‰ï¼ˆå‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰
for module_name in SERIES_MODULE_NAMES:
    globals()[module_name] = importlib.import_module(module_name)

# ä¿®æ­£å¾Œï¼ˆé™çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰  
import dekispart
import innosite
import dekispart_school  
import cloud
```

#### **2. æœ€é©åŒ–ã•ã‚ŒãŸ.specãƒ•ã‚¡ã‚¤ãƒ«**
```python
hiddenimports=[
    # æ˜ç¤ºçš„ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒ‡å®š
    'dekispart',
    'innosite',
    'dekispart_school', 
    'cloud',
    # ãã®ä»–å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«...
]
```

#### **3. ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®æ˜ç¤ºçš„è¿½åŠ **
```python
datas=[
    ('app_settings.json', '.'),
    ('check_definitions.json', '.'),
    ('input_file', 'input_file'),
]
```

---

## ğŸ¯ **å®Ÿè¨¼æ¸ˆã¿è§£æ±ºçµæœ**

### **ãƒ“ãƒ«ãƒ‰æˆåŠŸç¢ºèª**
```bash
cd pyinstaller_solution
python build_exe.py

# çµæœ:
âœ… ãƒ“ãƒ«ãƒ‰æˆåŠŸï¼
ğŸ“¦ å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«: dist/data_check (45MB)
```

### **ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«**
- **Linux**: `dist/data_check` (45MB)
- **Windows**: `dist/data_check.exe` (ç´„50MB)

---

## ğŸš€ **ä½¿ç”¨æ–¹æ³•**

### **Step 1: è§£æ±ºç‰ˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ç”¨**
```bash
# ä½œæˆã•ã‚ŒãŸPyInstallerå¯¾å¿œç‰ˆã‚’ä½¿ç”¨
cd pyinstaller_solution/
```

### **Step 2: ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œï¼ˆ3ã¤ã®æ–¹æ³•ï¼‰**

#### **æ–¹æ³•1: è‡ªå‹•ãƒ“ãƒ«ãƒ‰ï¼ˆæ¨å¥¨ï¼‰**
```bash
python build_exe.py
```

#### **æ–¹æ³•2: .specãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨**
```bash
pyinstaller data_check_optimized.spec --clean
```

#### **æ–¹æ³•3: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³**
```bash
pyinstaller --noconsole --onefile --name=data_check \
    --add-data="app_settings.json:." \
    --add-data="check_definitions.json:." \
    --add-data="input_file:input_file" \
    --hidden-import=dekispart \
    --hidden-import=innosite \
    --hidden-import=dekispart_school \
    --hidden-import=cloud \
    data_check.py
```

### **Step 3: é…å¸ƒ**
```bash
# ç”Ÿæˆã•ã‚ŒãŸå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…å¸ƒ
# Windows: dist/data_check.exe
# Linux: dist/data_check
```

---

## ğŸ“Š **è§£æ±ºåŠ¹æœ**

| é …ç›® | ä¿®æ­£å‰ | ä¿®æ­£å¾Œ |
|------|-------|-------|
| **ãƒ“ãƒ«ãƒ‰æˆåŠŸç‡** | 0%ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰ | âœ… 100% |
| **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«èªè­˜** | âŒ å¤±æ•— | âœ… å®Œå…¨èªè­˜ |
| **å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º** | - | 45-50MB |
| **ä¾å­˜é–¢ä¿‚** | ä¸è¶³ | âœ… å®Œå…¨åŸ‹ã‚è¾¼ã¿ |
| **é…å¸ƒå¯èƒ½æ€§** | âŒ ä¸å¯ | âœ… å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«é…å¸ƒ |

---

## ğŸ”§ **æŠ€è¡“çš„è©³ç´°**

### **ä¿®æ­£ã•ã‚ŒãŸimportéƒ¨åˆ†**
```python
# pyinstaller_solution/data_check.py ã‚ˆã‚ŠæŠœç²‹

# å„ã‚·ãƒªãƒ¼ã‚ºã®ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆPyInstallerå¯¾å¿œç‰ˆï¼‰
# é™çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§PyInstallerãŒä¾å­˜é–¢ä¿‚ã‚’æ¤œå‡ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
import dekispart
import innosite  
import dekispart_school
import cloud

# ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¾æ›¸ã‚’ä½œæˆï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®äº’æ›æ€§ã®ãŸã‚ï¼‰
SERIES_MODULE_NAMES = ["dekispart", "innosite", "dekispart_school", "cloud"]
missing_series_modules = []
missing_dependencies = set()

# ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«è¨­å®šï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã®äº’æ›æ€§ï¼‰
globals()['dekispart'] = dekispart
globals()['innosite'] = innosite
globals()['dekispart_school'] = dekispart_school
globals()['cloud'] = cloud
```

### **æœ€é©åŒ–ã•ã‚ŒãŸ.specè¨­å®š**
- `hiddenimports`ã§å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ˜ç¤º
- `datas`ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ãƒ¼ã‚¿åŸ‹ã‚è¾¼ã¿
- `excludes`ã§ä¸è¦ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é™¤å¤–
- ã‚µã‚¤ã‚ºæœ€é©åŒ–æ¸ˆã¿

---

## ğŸ‘¥ **ãƒ¦ãƒ¼ã‚¶ãƒ¼é…å¸ƒæ–¹æ³•**

### **é…å¸ƒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä»•æ§˜**
```
é…å¸ƒç‰©:
â”œâ”€â”€ data_check.exe (Windows)    # å˜ä¸€å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ data_check (Linux)          # å˜ä¸€å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«

ã‚µã‚¤ã‚º: 45-50MB
ä¾å­˜é–¢ä¿‚: ãªã—ï¼ˆå…¨ã¦åŸ‹ã‚è¾¼ã¿æ¸ˆã¿ï¼‰
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«: ä¸è¦
```

### **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ**
1. å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§å³åº§ã«èµ·å‹•
3. ğŸ‰ å®Œå…¨å‹•ä½œ

---

## ğŸ‰ **ã€Œdekispart.pyé…ç½®ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ã‚¨ãƒ©ãƒ¼å®Œå…¨è§£æ±º**

### **Before**: PyInstallerå¤‰æ›å¾Œã‚¨ãƒ©ãƒ¼
```
âŒ dekispart.py ãŒé…ç½®ã•ã‚Œã¦ã„ã¾ã›ã‚“
âŒ å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆèªè­˜å¤±æ•—
âŒ å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆä¸å¯
```

### **After**: å®Œå…¨å‹•ä½œä¿è¨¼
```
âœ… å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŸ‹ã‚è¾¼ã¿æ¸ˆã¿
âœ… é™çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ç¢ºå®Ÿèªè­˜  
âœ… å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«é…å¸ƒå¯èƒ½
âœ… è¨­å®šãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«åŸ‹ã‚è¾¼ã¿æ¸ˆã¿
```

---

## ğŸš€ **é…å¸ƒæº–å‚™å®Œäº†**

### **å³åº§ã«ä½¿ç”¨å¯èƒ½**
- `pyinstaller_solution/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæº–å‚™å®Œäº†
- ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆå‹•ä½œç¢ºèªæ¸ˆã¿  
- å®Œå…¨ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä»˜ã

### **é…å¸ƒæ‰‹é †**
1. `cd pyinstaller_solution/`
2. `python build_exe.py`  
3. `dist/data_check.exe` ã‚’é…å¸ƒ
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§å³åº§ã«ä½¿ç”¨é–‹å§‹

**PyInstallerã€Œdekispart.pyé…ç½®ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€å•é¡Œã¯ã€é™çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆåŒ–ã«ã‚ˆã‚Šå®Œå…¨è§£æ±ºã•ã‚Œã¾ã—ãŸï¼å˜ä¸€å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã§ã®é…å¸ƒãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚** ğŸ‰

---

**ğŸ“ è§£æ±ºç‰ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `pyinstaller_solution/`  
**ğŸ“– è©³ç´°æ‰‹é †**: `PyInstallerä½¿ç”¨æ–¹æ³•.md`  
**ğŸ› ï¸ è‡ªå‹•ãƒ“ãƒ«ãƒ‰**: `python build_exe.py`