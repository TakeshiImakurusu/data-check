# 要件文書

## はじめに

このシステムは、建設システム社の基幹データベースに格納されている複数のシリーズ（DEKISPART、INNOSITE、DEKISPART_SCHOOL、CLOUD）のデータ品質をチェックし、データの整合性と正確性を確保するためのデータチェックシステムです。

システムは、各シリーズ固有のビジネスルールに基づいてデータを検証し、エラーや不整合を検出・報告します。また、ユーザーフレンドリーなGUIを提供し、チェック結果の表示、フィルタリング、エクスポート機能を備えています。

## 要件

### 要件1

**ユーザーストーリー:** データ管理者として、複数のデータシリーズに対して一括でデータチェックを実行したい。これにより、効率的にデータ品質を監視できる。

#### 受入基準

1. WHEN ユーザーがデータチェックを実行する THEN システムは DEKISPART、INNOSITE、DEKISPART_SCHOOL、CLOUD の各シリーズに対してチェックを実行する SHALL
2. WHEN チェックが実行される THEN システムは各シリーズ固有のビジネスルールを適用する SHALL
3. WHEN チェックが完了する THEN システムは統合されたエラーレポートを生成する SHALL

### 要件2

**ユーザーストーリー:** データ管理者として、チェック結果を詳細に確認し、フィルタリングや検索を行いたい。これにより、特定の問題に焦点を当てて対処できる。

#### 受入基準

1. WHEN チェック結果が表示される THEN システムはシリーズ、ユーザーID、チェックID、エラー内容を表示する SHALL
2. WHEN ユーザーがフィルタを適用する THEN システムはシリーズ別、エラー内容別でデータをフィルタリングする SHALL
3. WHEN ユーザーが検索を実行する THEN システムはエラー内容やIDに基づいて結果を絞り込む SHALL
4. WHEN ユーザーがソートを実行する THEN システムは指定された基準（シリーズ、ユーザーID、チェックID、エラー内容）で結果をソートする SHALL

### 要件3

**ユーザーストーリー:** データ管理者として、チェック結果をExcelファイルとしてエクスポートしたい。これにより、他のツールでの分析や報告書作成が可能になる。

#### 受入基準

1. WHEN ユーザーがエクスポートを実行する THEN システムはチェック結果をCSVまたはExcel形式でダウンロードする SHALL
2. WHEN エクスポートが実行される THEN ファイルには現在表示されているフィルタ済みの結果が含まれる SHALL
3. WHEN エクスポートが完了する THEN システムはファイル保存場所をユーザーに通知する SHALL

### 要件4

**ユーザーストーリー:** システム管理者として、補助ファイル（個人名リスト、トータルネットリスト等）のパスを設定・管理したい。これにより、チェックロジックで使用する外部データを適切に管理できる。

#### 受入基準

1. WHEN システム管理者が設定画面を開く THEN システムは補助ファイル設定ダイアログを表示する SHALL
2. WHEN ファイルパスが設定される THEN システムは設定をapp_settings.jsonに永続化する SHALL
3. WHEN 無効なファイルパスが指定される THEN システムはエラーメッセージを表示する SHALL
4. WHEN 補助ファイルが見つからない THEN システムは該当するチェックをスキップし、警告を表示する SHALL

### 要件5

**ユーザーストーリー:** システム管理者として、チェック定義（エラーメッセージ、重要度等）をカスタマイズしたい。これにより、組織固有の要件に合わせてシステムを調整できる。

#### 受入基準

1. WHEN システム管理者がチェック定義編集画面を開く THEN システムは全てのチェック項目を表示する SHALL
2. WHEN チェック項目が選択される THEN システムはチェックID、項目名、エラー内容、説明を表示する SHALL
3. WHEN エラー内容が編集される THEN システムは変更をcheck_definitions.jsonに保存する SHALL
4. WHEN エラー内容がクリアされる THEN システムはデフォルトメッセージに戻す SHALL

### 要件6

**ユーザーストーリー:** データ管理者として、チェック実行中の進捗状況を確認したい。これにより、処理の進行状況を把握し、完了を待つことができる。

#### 受入基準

1. WHEN チェックが開始される THEN システムは進捗バーを表示する SHALL
2. WHEN チェックが進行する THEN システムは現在処理中のシリーズとレコード数を表示する SHALL
3. WHEN チェックが完了する THEN システムは完了メッセージとサマリーを表示する SHALL

### 要件7

**ユーザーストーリー:** データ管理者として、各シリーズのデータベースに安全に接続し、データを取得したい。これにより、最新のデータに対してチェックを実行できる。

#### 受入基準

1. WHEN システムが起動される THEN システムはconfig.iniから接続情報を読み込む SHALL
2. WHEN データベース接続が確立される THEN システムは適切な認証情報を使用する SHALL
3. WHEN 接続エラーが発生する THEN システムはエラーメッセージを表示し、処理を中断する SHALL
4. WHEN データ取得が完了する THEN システムは接続を適切に閉じる SHALL

### 要件8

**ユーザーストーリー:** データ管理者として、システムの使用方法やバージョン情報を確認したい。これにより、システムを適切に使用し、サポートを受けることができる。

#### 受入基準

1. WHEN ユーザーがヘルプメニューを選択する THEN システムは使用方法を表示する SHALL
2. WHEN バージョン情報が要求される THEN システムはアプリケーションバージョン、作成者、作成日を表示する SHALL
3. WHEN チェック内容一覧が要求される THEN システムは全てのチェック項目の詳細を表示する SHALL